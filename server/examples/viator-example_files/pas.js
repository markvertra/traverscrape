function pasReload(a){a.action="/destProdSearch.jspa";var b=a.country.options[a.country.selectedIndex];return""!==a.region.value&&(b=a.region.options[a.region.selectedIndex]),a.destinationID.value=b.getAttribute("dID"),doPasLoad(a,!0)}function initPas(){function a(){m.click(function(a){a.preventDefault(),j(p,q),n.is(":visible")||b(m,n,o),k()}),p.click(function(a){a.preventDefault(),p.data("loading")||(i(),p.find("span").attr("data-list-count")>0&&(q.is(":visible")||b(p,q,r),l()))}),t.click(function(a){a.preventDefault();var b=m.find("span"),c=b.text(),d=p.find("span"),e=d.text(),f=$("#countryUrl").val(),g=$("#regionUrl").val(),h="";return c===b.attr("data-default")&&e===d.attr("data-default")?void alert("You must select a country to search."):(""!==g?h=g:""!==f&&(h=f),Viator.DTM.whenTrackingActive(function(){Viator.Event.emit("megaMenuGo",{country:c,region:e})}),void(location.href=h))}),$("body").click(function(a){var b=$(a.target);if(!b.is("#countryMenuLink, #countryMenuLink *, #regionMenuLink, #regionMenuLink *")){var c=b.parents();n.is(":visible")&&c.index(n)===-1&&i(),q.is(":visible")&&c.index(q)===-1&&j()}}),$(document).on("PasRepaint",function(){d()}),y.resize(function(){n.is(":visible")?b(m,n,o):q.is(":visible")&&(q.css("width",q.data("width")),b(p,q,r))}),d()}function b(a,b,c){b.css("left",0);var d=b.outerWidth(),e=Viator.Common.getWindowCenter(d,1),f=y.width()-a.offset().left-15;c.css({top:a.offset().top+a.outerHeight()-2,left:a.offset().left,width:a.outerWidth()}),d<f||d===a.outerWidth()?b.css("left",a.offset().left):b.css("left",e.left)}function c(){var a=m.outerHeight(),b=p.outerHeight();o.css({top:m.offset().top+a-2,left:m.offset().left,width:m.outerWidth()}),n.hideTop().show().css({top:m.offset().top+a+o.outerHeight()-3,left:m.offset().left,width:n.outerWidth(!0)+2,minWidth:m.outerWidth()}).hide(),r.css({top:p.offset().top+b-2,left:p.offset().left,width:p.outerWidth()})}function d(){n.appendTo("body"),q.appendTo("body"),o.appendTo("body"),r.appendTo("body"),c()}function e(){var a=$("#countryId").val(),b=m.find("span"),c=b.attr("data-default");b.text()!==c&&""!==a&&h(a)}function f(a){a.click(function(){p.data("loading",!0).addClass("menu-dropdown-empty");var b=p.find("span"),c=b.attr("data-default");b.text()!==c&&b.text(c),i(),m.find("span").text(a.text()),$("#countryId").val(a.attr("did")),$("#countryUrl").val(a.attr("durl")),$("#countryName").val(a.text()),$("#regionId").val(""),$("#regionUrl").val(""),h(a.attr("did"))})}function g(a){a.click(function(){j(),p.find("span").text(a.text()),$("#regionId").val(a.attr("did")),$("#regionUrl").val(a.attr("durl"))})}function h(a){function b(b){q.css({width:"auto",minWidth:"auto"}),c.html(b);var e=c.find('ul[data-group="cities"], ul[data-group="regions"]'),f=e.length,h=p.find("span");h.attr("data-list-count",f),e.children().each(function(){var a=$(this),b=a.find("a");g(b)}),0===f?(p.addClass("menu-dropdown-empty"),h.text("No Regions/Cities")):(p.removeClass("menu-dropdown-empty"),""!==d&&d>0?$("#regionUrl").val(e.find('a[did="'+d+'"]').attr("durl")):h.text(h.attr("data-default"))),q.hideTop().show();var i=q[a];i||(i=q.outerWidth(!0)+2,q[a]=i),q.css({top:p.offset().top+p.outerHeight()+r.outerHeight()-3,minWidth:p.outerWidth()}).hide(),p.data("loading",!1)}var c=$('div[data-group="cityRegion"]'),d=$("#regionId").val(),e=c.data(a);return void 0!==e?void b(e):void $.ajax({url:"/pascities.jspa?country="+escape(a),dataType:"text",success:function(d){c.data(a,d),b(d)}})}function i(){n.hide(),o.hide(),m.removeClass("menu-dropdown-active")}function j(){q.hide(),r.hide(),q.data("width","auto"),p.removeClass("menu-dropdown-active")}function k(){m.toggleClass("menu-dropdown-active"),o.is(":visible")?n.slideUp(200,function(){o.hide()}):o.show(0,function(){n.slideDown(200)})}function l(){p.toggleClass("menu-dropdown-active"),r.is(":visible")?q.slideUp(200,function(){r.hide(),q.data("width","auto")}):r.show(0,function(){q.slideDown(200),q.data("width",q.outerWidth())})}var m=$("#countryMenuLink"),n=$("#countryMenuBox"),o=$("#countryMenuBuffer"),p=$("#regionMenuLink"),q=$("#regionMenuBox"),r=$("#cityMenuBuffer"),s="",t=$("#go"),u=$("#countryId").val(),v=23,w=5,x=0,y=$(window),z=$('div[data-group="countries"]'),A=0;z.children().each(function(a){var b=$(this),c=b.find("a"),d=c.text().substring(0,1);""!==s&&s!==d&&(A+=1),s=d});var B=z.children().length+A,C=B/v,D=v;C>=w&&(D=Math.ceil(B/w)),e(),z.children().each(function(a){var b=$(this),c=b.find("a"),d=c.text().substring(0,1);""!==s&&s!==d&&(a+x)%D!==0&&(b.before('<div data-item="">&nbsp;</div>'),x++),u===c.attr("did")&&$("#countryUrl").val(c.attr("durl")),s=d,f(c)}),z.children().each(function(a){a%D===0&&z.children('div[data-item=""]').slice(0,D).wrapAll('<div class="size-pas-countries unit"><div class="prl">')}),a()}